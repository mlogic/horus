.PS
figname = interrupt;

dx = 0.1; dy = 0.1;
h = .4; w = 1.6; m = 0.05;

Host: [
  down; boxht = h; boxwid = w;
  App: box "Application $A$"; move m;
  Horus: [ right; box wid w/2 ht h/2 invis; box wid w/2 ht h/2 "LibHorus"; ];
  move m*2;
  OS: [
    FS: [ right; box wid w/2 "Filesystem"; box wid w/4 "Fuse";
          box invis wid w/4; ];
  ]; box ht OS.ht+m*2 wid OS.wid+m*2 at OS; "OS" at OS.FS.ne below rjust;
]; box ht Host.ht+m*2 wid Host.wid+m*2 at Host

define p1 { Host.App + (w*(3/8),-m*2) }
define p2 { Host.s + (w*(3/8),-h+m) }
define p3 { Host.s + (w*(3/4),-h+m) }

define kdsp { Host.s + (w*(3/4)+m,-h) }
"$KDS$" at kdsp ljust

define p4 { Host.App + (-w*(1/8),-m*2) }
define p5 { Host.OS + (-w*(1/8),m*2) }
define p6 { Host.OS + (w*(1/8),m*2) }
define p7 { Host.Horus + (w*(1/8),-m) }
define p8 { Host.Horus + (w*(5/16),-m) }
define p9 { Host.s + (w*(5/16),-h-m) }
define p10 { Host.s + (w*(3/4),-h-m) }

circle rad 0.01 fill at p1
line from p1 to p2+(0,dy)
arc from p2+(0,dy) to p2+(dx,0) rad dx
arrow from p2+(dx,0) to p3

circle rad 0.01 fill at p4
line from p4 to p5+(0,dy)
arc from p5+(0,dy) to p5+(dx,0) rad dx
line from p5+(dx,0) to p6-(dx,0)
arc from p6-(dx,0) to p6+(0,dy) rad dx
line from p6+(0,dy) to p7-(0,dy)
arc cw from p7-(0,dy) to p7+(dx,0) rad dx
line from p7+(dx,0) to p8-(dx,0)
arc cw from p8-(dx,0) to p8-(0,dy) rad dx
line from p8-(0,dy) to p9+(0,dy)
arc from p9+(0,dy) to p9+(dx,0) rad dx
line -> from p9+(dx,0) to p10


.PE
