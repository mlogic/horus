.PS
figname = base;

dx = 0.1; dy = 0.1; m = 0.1;
h = 0.8; w = 0.4;
xh = 0.5; xw = 0.3;

boxht = h; boxwid = w;

down;

SC: [
  right;
  F:  box "Frontend" "Node"; move m;
  C1: box "Client" "Node1"; move m;
  C2: box "Client" "Node2"; move m;
  C3: box "Client" "Node3"; move m;
  C4: box "Client" "Node4"; move m;
  C5: box "Client" "Node5";
]

move;
move;

X: [
  right; 

  KDS: box "KDS"; move m; move m;

  Y: [
    down;

    DFS: box ht .2 wid xw*6+m*5 "distributed file system (Ceph)";

    move m;

    Z: [
      right;
      boxht = xh; boxwid = xw;

      MDS1: box "MDS"; move m;
      MDS2: box "MDS"; move m;
      box "..." wid (xw-m)/2 invis; move m;
      OSD1: box "OSD"; move m;
      OSD2: box "OSD"; move m;
      OSD3: box "OSD"; move m;
      box "..." wid (xw-m)/2 invis;
    ]
  ]
]

spline -> down .2 from SC.F.sw+(dx,0) to X.KDS.nw+(dx,dy) to X.KDS.nw+(dx,0)
# spline -> down .2 from SC.F.sw+(dx*2,0) to X.MDS1.nw+(dx,dy) to X.MDS1.nw+(dx,0)

spline -> down 0.2 from SC.F.sw+(dx*3.5,0) to SC.C1+(0,-0.50) to SC.C1.s
spline -> down 0.3 from SC.F.sw+(dx*3.0,0) to SC.C2+(0,-0.75) to SC.C2.s
spline -> down 0.4 from SC.F.sw+(dx*2.5,0) to SC.C3+(0,-1.00) to SC.C3.s
spline -> down 0.5 from SC.F.sw+(dx*2.0,0) to SC.C4+(0,-1.25) to SC.C4.s
spline -> down 0.6 from SC.F.sw+(dx*1.5,0) to SC.C5+(0,-1.50) to SC.C5.s

.PE

